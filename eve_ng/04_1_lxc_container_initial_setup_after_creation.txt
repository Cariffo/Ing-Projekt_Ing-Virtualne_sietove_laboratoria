apt-get update
apt-get install aptitude
aptitude update
aptitude install openssh bash-completion

# Musime restartovat kontajner, aby sa bash-completion aktivoval
Ctrl+D
sudo lxc-stop --name eve-ng-lxc
sudo lxc-start --name eve-ng-lxc
sudo lxc-attach --name eve-ng-lxc

aptitude install openssh-client openssh-server
passwd

# NASTAVENIE STATICKEJ IP ADRESY PRE LXC KONTAJNER
# Presvedcime sa, ze IPv4 forwarding je aktivovane (nastavene
    na 1)

cat /etc/sysctl.conf | grep net.ipv4.ip_forward

Vystup (riadok ma byt odkomentovany):
net.ipv4.ip_forward=1

ALEBO

cat /proc/sys/net/ipv4/ip_forward
1

# Ak IPv4 forwarding aktivny nie je (nastaveny na 0 alebo zakomentovany),
# aktivujeme ho docasne (po reboote sa forwarding vypne) prikazom

echo 1 > /proc/sys/net/ipv4/ip_forward


# ... alebo persistentna aktivacia
sudo vim /etc/sysctl.conf

# Odkomentujeme ...
net.ipv4.ip_forward = 1

# ... a aktualizujeme konfiguraciu
sudo sysctl -p /etc/sysctl.conf



# Presvedcime sa, ze FORWARD pre bridge rozhranie "pnet0" v iptables je 
# nastavene na ACCEPT
sudo iptables -S | grep FORWARD

# Vystup:
-P FORWARD DROP
...
-A FORWARD -o pnet0 -j ACCEPT
-A FORWARD -i pnet0 -j ACCEPT
...


# Ak sa rozhranie v zozname nenachadza, povolime ho na hostovi pre vstup aj
# pre vystup

# Docasne riesenie
sudo iptables -A FORWARD -o pnet0 -j ACCEPT
sudo iptables -A FORWARD -i pnet0 -j ACCEPT

# Trvale riesenie





# Upravime rozhrania v kontajneri
vim /etc/network/interfaces

auto eth0
iface eth0 inet static
	address <verejna_ip_servera>
	netmask <maska>
	gateway <predvolena_brana>
	dns-nameservers <ip_dns_servera>
iface eth0 inet6 manual

Ctrl+D
sudo vim /var/lib/lxc/eve-ng-lxc/config

# Nastav staticku IPv4 adresu do konfiguracneho suboru LXC kontajnera
lxc.network.ipv4 = <IP_ADRESA>/<MASKA>      # 192.168.0.20/24
lxc.network.ipv4.gateway = <IP_ADRESA>      # 192.168.0.1


# Perzistentne nastavenie DNS serverov v LXC kontajneri
# vid ./GENERAL_edit_DNS_nameservers_via_resolvconf.txt










# Zdroje
# https://help.ubuntu.com/lts/serverguide/lxc.html#lxc-autostart
# https://coderwall.com/p/ysog_q/lxc-autostart-container-at-boot-choose-order-and-delay
# https://serverfault.com/questions/571714/setting-up-bridged-lxc-containers-with-static-ips
# http://www.ducea.com/2006/08/01/how-to-enable-ip-forwarding-in-linux/