************* DOLEZITE ADRESARE *************

  /opt/unetlab/addons
    -obrazy diskov (z adresára addons musíme vylúčiť podadresár "/opt/unetlab/addons/iol/lib", aby nedošlo ku konfliktu súborov!)

  /opt/unetlab/labs
    -projektové súbory (topológie)

  /opt/unetlab/html/templates
    -šablóny pre jednotlivé typy zariadení

************* DOLEZITE SUBORY *************

  /etc/hostname
    -ak chceme zmenit hostname servera, potrebujeme ho zmenit aj v:
      -/etc/apache2/apache2.conf
      -/etc/apache2/sites-enabled/unetlab.conf

  /etc/network/interfaces
    -kvoli statickej IPv4
    -vypnuta IPv6 (manual)

  /apache2/conf/apache2.conf
    -upravene podla suboru "06_zabezpecenie_servera.txt"
    -zmenene ServerName na sirena

  /etc/apache2/sites-enabled/unetlab.conf
    -pocuvanie na konkretnej IPcke: zmena z '<VirtualHost *:80>' na '<VirtualHost IP_ADRESA_SERVERA:80>'
    -presmerovanie HTTP (port 80) na HTTPS (port 443): pridany riadok 'Redirect / https://IP_ADRESA_SERVERA/' pod '<VirtualHost *:80>' resp. '<VirtualHost IP_ADRESA_SERVERA:80>'
    -zmenene ServerName na sirena

  /etc/apache2/sites-enabled/default-ssl.conf
    -zmena - pocuvanie na konkretnej IPcke '<VirtualHost _default_:443>' na '<VirtualHost IP_ADRESA_SERVERA:443>'
    -zmenene ServerName na sirena (ak je pritomne)

  /etc/issue.net -> SSH sprava pred prihlasenim
  /etc/motd -> SSH sprava po prihlaseni


************* POSTUP ZALOHOVANIA / MIGRACIE *************

*************
Skript na zalohovanie na vzdialeny server.

Pouzivam 'rsync' na zalohovanie najdolezitejsich suborov do LXC kontajnera. EVE-ng server sa voci LXC kontaineru autentifikuje SSH certifikatom, takze nemusime manualne zadavat heslo.


vim.tiny zaloha_na_eve_backup.sh


#!/bin/bash

EVE_BACKUP_IP=158.193.152.45

rsync -a -e "ssh -i $HOME/.ssh/id_rsa" /opt/unetlab/addons/dynamips/ andrej@$EVE_BACKUP_IP:/home/andrej/eve-ng_zaloha/opt_unetlab_addons_dynamips
rsync -a -e "ssh -i $HOME/.ssh/id_rsa" /opt/unetlab/addons/iol/bin/ andrej@$EVE_BACKUP_IP:/home/andrej/eve-ng_zaloha/opt_unetlab_addons_iol_bin
rsync -a -e "ssh -i $HOME/.ssh/id_rsa" /opt/unetlab/addons/qemu/ andrej@$EVE_BACKUP_IP:/home/andrej/eve-ng_zaloha/opt_unetlab_addons_qemu
rsync -a -e "ssh -i $HOME/.ssh/id_rsa" /opt/unetlab/addons/rozne_zariadenia/ andrej@$EVE_BACKUP_IP:/home/andrej/eve-ng_zaloha/opt_unetlab_addons_rozne_zariadenia
rsync -a -e "ssh -i $HOME/.ssh/id_rsa" /opt/unetlab/addons/rozne_zariadenia_prehlad.txt andrej@$EVE_BACKUP_IP:/home/andrej/eve-ng_zaloha/opt_unetlab_addons/
rsync -a -e "ssh -i $HOME/.ssh/id_rsa" /opt/unetlab/addons/rozne_zariadenia_subory.txt andrej@$EVE_BACKUP_IP:/home/andrej/eve-ng_zaloha/opt_unetlab_addons/
rsync -a -e "ssh -i $HOME/.ssh/id_rsa" /opt/unetlab/labs/ andrej@$EVE_BACKUP_IP:/home/andrej/eve-ng_zaloha/opt_unetlab_labs



Potom vytvorime cron job, ktory bude kazdy den o 3:00 spustat tento zalohovaci skript.


*************
Skript na lokalne zalohovanie.

Ale najlepsie by bolo, keby sa hlavny disk zalohoval klonovanim na dalsie lokalne disky na serveri aj vzdialene, aby sme sa nemuseli spoliehat na lokalny system. Zalohovanie sa bude vykonavat kazdy den, najlepsie v noci.

Zdroje:
http://superuser.com/questions/387477/sftp-upload-all-files-directories-and-sub-directories-contained-in-a-folder#387543
http://www.eve-ng.net/index.php/faq
https://unix.stackexchange.com/questions/127352/specify-identity-file-id-rsa-with-rsync
https://www.liquidweb.com/kb/using-rsync-to-transfer-and-synchronize-local-and-remote-systems/
